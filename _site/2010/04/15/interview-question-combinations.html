<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Alieniloquent: Interview Question: Combinations</title>
  <link rel="stylesheet" type="text/css" href="/stylesheets/yui-reset.css"/>
  <link rel="stylesheet" type="text/css" href="/stylesheets/yui-fonts.css"/>
  <link rel="stylesheet" type="text/css" href="/stylesheets/yui-grids.css"/>
  <link rel="stylesheet" type="text/css" href="/stylesheets/simple-style.css"/>
  <link rel="stylesheet" type="text/css" href="/stylesheets/blog.css" />
</head>
<body>
 <div id="doc" class="yui-t4">
   <div id="hd" class="content">
     <h1 id="title"><a href="http://www.alieniloquent.com/">Alieniloquent</a></h1>
     <ul id="navigation">
       <li class="first"><a href="http://blog.alieniloquent.com">blog</a></li>
       <li><a href="http://github.com/stesla">code</a></li>
       <li><a href="http://www.alieniloquent.com/resume.pdf">resum&eacute;</a></li>
     </ul>
     <br/>
   </div>
   <div id="bd">
     <div id="yui-main">
       <div class="yui-b">
         <div class="post">
  <h3><a href="/2010/04/15/interview-question-combinations.html" title="Permalink for this post">Interview Question: Combinations</a></h3>
  <p class="date">April 15th, 2010</p>
  <div class="entry"><p>So I had a job interview yesterday with a great company, and I met a lot of awesome people. A question that was asked, presumably to test my approach to algorithm design, caught me off guard, and I didn&#8217;t give the best answer I feel I was capable of. It bugged me the whole flight home, so, I whipped up a better answer. It seemed like the perfect kind of thing to post here on my blog.</p>

<p>The problem: generate all combinations (without repetiton) with length <code>len</code> of the numbers from 1 to <code>max</code>.</p>

<p>Hearing that problem, my mind immediately jumped to all of my combinatorics background, and I started thinking about how to <em>count</em> all of those combinations. I really just could not get my mind out of that little rat hole, but my interviewers coaxed me out. By the time we were done with that part of the interview, we had come up with something that was on the right track, but still wouldn&#8217;t work.</p>

<p>A few simplifying assumptions can be made. Since these are combinations, order doesn&#8217;t matter (e.g. <code>[1,2,3]</code> is the same as <code>[3,2,1]</code>). Also, since they do not have repetition, we can place an ordering constraint on the individual elements. So, for the 3-element combinations, we can say we want all combinations <code>[z,y,x]</code> where <code>1 ≤ x &lt; y &lt; z ≤ max</code> (the tuple is backwards for convenience of implementation, you could do it the other way just as easy).</p>

<p>So with those two assumptions in mind, I stubbed out my function.</p>
<div class='highlight'><pre><code class='haskell'><span class='nf'>combinations</span> <span class='ow'>::</span> <span class='kt'>Int</span> <span class='ow'>-&gt;</span> <span class='kt'>Int</span> <span class='ow'>-&gt;</span> <span class='p'>[[</span><span class='kt'>Int</span><span class='p'>]]</span>
<span class='nf'>combinations</span> <span class='n'>len</span> <span class='n'>max</span> <span class='ow'>=</span> <span class='n'>undefined</span>
</code></pre>
</div>
<p>I had gotten three-quarters of the way toward a working implementation during my interview, so I was already leaning toward a recursive solution here. But, when I keyed in what I&#8217;d come up with earlier, it wasn&#8217;t working right. I was getting things like <code>[2,2]</code> which should just not show up. I also could not do something like <code>combinations 3 3</code> and get anything back. I clearly had some boundary issues. So, I decided to actually write out the sets I was expecting and see if I saw any patterns.</p>
<div class='highlight'><pre><code class='text'>combinations 0 3 =&gt; [[]]
combinations 1 3 =&gt; [[1],[2],[3]]
combinations 2 3 =&gt; [[2,1],[3,1],[3,2]]
combinations 3 3 =&gt; [[3,2,1]]
combinations 4 3 =&gt; [[]]
</code></pre>
</div>
<p>The most obvious thing is that there&#8217;s a clear relationship between the length of the combination and the number of combinations available, which is pretty basic combinatorics. There&#8217;s only one way to choose 3 items from a set of 3 items. But looking at this, I&#8217;m trying to conceive of some way to devise a recursive algorithm to produce those lists. So I rewrite the output to show how I would expect those to get built recursively.</p>
<div class='highlight'><pre><code class='text'>combinations 0 3 =&gt; [[]]
combinations 1 3 =&gt; [1:[]] ++ [2:[]] ++ [3:[]]
combinations 2 3 =&gt; [2:[1]] ++ [3:[1], 3:[2]]
combinations 3 3 =&gt; [3:[2,1]]
combinations 4 3 =&gt; [[]]
</code></pre>
</div>
<p>Now it might be apparent why I chose the ordering constraint I did. It makes it easy to build these lists with conses. The most imporant observation to make from this data is what numbers actually get selected to be consed. At each level of recursion we&#8217;re selecting only the numbers between <code>len</code> and <code>max</code> to be added onto lists, and then we recurse with all the numbers <em>less than</em> those.</p>

<p>Here is the final implementation:</p>
<div class='highlight'><pre><code class='haskell'><span class='nf'>combinations</span> <span class='mi'>0</span> <span class='kr'>_</span> <span class='ow'>=</span> <span class='p'>[</span><span class='kt'>[]</span><span class='p'>]</span>
<span class='nf'>combinations</span> <span class='n'>len</span> <span class='n'>max</span> <span class='ow'>=</span> <span class='n'>foldr</span> <span class='n'>reduce</span> <span class='kt'>[]</span> <span class='p'>[</span><span class='n'>len</span><span class='o'>..</span><span class='n'>max</span><span class='p'>]</span>
  <span class='kr'>where</span> <span class='n'>reduce</span> <span class='n'>x</span> <span class='n'>ys</span> <span class='ow'>=</span> <span class='n'>recurse</span> <span class='n'>x</span> <span class='o'>++</span> <span class='n'>ys</span>
        <span class='n'>recurse</span> <span class='n'>x</span> <span class='ow'>=</span> <span class='n'>prepend</span> <span class='n'>x</span> <span class='p'>(</span><span class='n'>combinations</span> <span class='p'>(</span><span class='n'>len</span> <span class='o'>-</span> <span class='mi'>1</span><span class='p'>)</span> <span class='p'>(</span><span class='n'>x</span> <span class='o'>-</span> <span class='mi'>1</span><span class='p'>))</span>
        <span class='n'>prepend</span> <span class='n'>x</span> <span class='ow'>=</span> <span class='n'>map</span> <span class='p'>(</span><span class='nf'>\</span><span class='n'>xs</span> <span class='ow'>-&gt;</span> <span class='n'>x</span><span class='kt'>:</span><span class='n'>xs</span><span class='p'>)</span>
</code></pre>
</div></div>
  <p class="metadata alt">You may notice that I do not provide a space
    for comments. If you want to start a conversation, you can
    <a href="mailto:blog@alieniloquent.com">email me</a>, 
    <a href="http://twitter.com/stesla">tweet at me</a>, or post
    something on your own blog.</p>
</div>

       </div>
     </div>
     <div class="yui-b">
       <div class="yui-u sidebar">
         <h2 class="sectionheader first">Archives</h2>
         <ul>
           
           <li><a href="/2011/">2011</a></li>
           
           <li><a href="/2010/">2010</a></li>
           
           <li><a href="/2009/">2009</a></li>
           
           <li><a href="/2008/">2008</a></li>
           
           <li><a href="/2007/">2007</a></li>
           
           <li><a href="/2006/">2006</a></li>
           
           <li><a href="/2005/">2005</a></li>
           
         </ul>
       </div>
     </div>
   </div>
   <div id="ft">
     <p>Layout, design, graphics, photography and text all &copy; 2005-2010 Samuel Tesla unless otherwise noted.</p>
     <p>Portions of the site layout use Yahoo! YUI Reset, Fonts &amp; Grids.</p>
   </div>
 </div>

<!-- BEGIN GOOGLE ANALYTICS -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-12538528-2");
pageTracker._setDomainName(".alieniloquent.com");
pageTracker._trackPageview();
} catch(err) {}</script>
<!-- END GOOGLE ANALYTICS -->

</body>
</html>
